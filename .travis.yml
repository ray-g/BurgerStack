language: node_js
node_js:
  - "4"
  - "5"
  - "6"

# NodeJS v4 requires gcc 4.8
env:
  - NODE_ENV=travis CXX="g++-4.8" CC="gcc-4.8"
# gcc 4.8 requires ubuntu-toolchain-r-test
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.8
      - gcc-4.8
      - clang

services:
  - mongodb
  - postgresql
  - redis-server

before_script:
  - sleep 15
  - mongo mydb_test --eval 'db.addUser("travis", "test");'
  - psql -c 'create database burgerstack_test;' -U postgres

sudo: false

os:
  - linux

branches:
  only: master

script:
  - npm test
